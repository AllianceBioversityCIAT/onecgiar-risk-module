<ng-container
  *ngIf="
    router.isActive(
      '/risk-dashboard/initiatives/' + id + '/' + initiativeId,
      true
    )
  "
>
  <div class="globalContainer">
    <div class="head">
      <h3 class="primaryColor">
        Risk management for {{ initiative?.name }} ({{
          initiative?.official_code
        }})
      </h3>
      <div class="buttons">
        <button
          [disabled]="!canEdit()"
          [ngClass]="{ disabled: !canEdit() }"
          class="primaryButton mt-1"
          routerLink="./team-members"
        >
          Team Members
        </button>
        <button
          class="primaryButton mt-1"
          matTooltip="Risks Versions"
          routerLink="./versions"
        >
          Published Versions
        </button>
        <button
          [disabled]="!canPublish()"
          (click)="publish(initiative.id)"
          [ngClass]="{ disabled: !canPublish() }"
          class="primaryButton mt-1"
        >
          Publish
        </button>
        <button
          (click)="export(initiative.id, initiative.official_code)"
          class="primaryButton mt-1"
        >
          Export to excel
        </button>
        <!-- <button class="primaryButton mt-1"  (click)="openPublishDialog()">Publish</button> -->
        <button
          [disabled]="!canEdit()"
          [ngClass]="{ disabled: !canEdit() }"
          class="primaryButton mt-1"
          (click)="openNewRiskDialog()"
        >
          Create Risk
        </button>
      </div>
    </div>
    <div>
      <p style="float: right">
        This is a draft version until it get published. last update at
        {{ initiative?.last_updated_date | date : "short" }}
      </p>
    </div>
<app-risk-table [dataSource]="dataSource" (refresh)="refresh($event)" ></app-risk-table>
  </div>
</ng-container>

<router-outlet></router-outlet>
